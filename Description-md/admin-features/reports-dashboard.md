# Reports & Dashboard — IONEXUS Admin

## Mục tiêu
Cung cấp hệ thống báo cáo và bảng điều khiển toàn diện, giúp theo dõi hiệu suất kinh doanh, phân tích xu hướng thị trường và đưa ra quyết định dựa trên dữ liệu.

## Tính năng chính

### 1. Dashboard tổng quan
- **Chỉ số kinh doanh chính (KPIs)**:
  - Doanh thu
  - Số lượng giao dịch
  - Số lượng leads mới
  - Tỷ lệ chuyển đổi
  - Giá trị giao dịch trung bình
- **Biểu đồ xu hướng**:
  - Xu hướng doanh thu theo thời gian
  - Xu hướng số lượng giao dịch theo thời gian
  - Xu hướng số lượng leads theo thời gian
- **Phân bổ dữ liệu**:
  - Phân bổ giao dịch theo dự án
  - Phân bổ doanh thu theo khu vực
  - Phân bổ leads theo nguồn
- **Hoạt động gần đây**:
  - Giao dịch mới nhất
  - Leads mới nhất
  - Thanh toán mới nhất
  - Inquiries mới nhất

### 2. Báo cáo Sales & Marketing
- **Báo cáo Lead**:
  - Số lượng leads theo nguồn
  - Tỷ lệ chuyển đổi từ lead sang khách hàng
  - Thời gian xử lý lead trung bình
  - Chi phí thu hút lead
- **Báo cáo Sales**:
  - Doanh số theo sales/agent
  - Số lượng giao dịch theo sales/agent
  - Tỷ lệ thành công của sales/agent
  - Thời gian đóng giao dịch trung bình
- **Báo cáo Marketing**:
  - Hiệu quả của các chiến dịch marketing
  - ROI của các kênh marketing
  - Chi phí thu hút khách hàng (CAC)
  - Giá trị vòng đời khách hàng (LTV)
- **Báo cáo Conversion Funnel**:
  - Tỷ lệ chuyển đổi qua các giai đoạn
  - Điểm nghẽn trong quy trình chuyển đổi
  - So sánh hiệu suất chuyển đổi theo thời gian

### 3. Báo cáo Tài chính
- **Báo cáo Doanh thu**:
  - Doanh thu theo dự án
  - Doanh thu theo loại bất động sản
  - Doanh thu theo thời gian
  - So sánh với mục tiêu
- **Báo cáo Chi phí**:
  - Chi phí marketing
  - Chi phí hoa hồng
  - Chi phí vận hành
  - Chi phí khác
- **Báo cáo Lợi nhuận**:
  - Lợi nhuận gộp
  - Lợi nhuận ròng
  - Biên lợi nhuận
  - ROI theo dự án
- **Báo cáo Dòng tiền**:
  - Dòng tiền vào
  - Dòng tiền ra
  - Dự báo dòng tiền
  - Phân tích thanh khoản

### 4. Báo cáo Dự án & Inventory
- **Báo cáo Dự án**:
  - Tình trạng dự án
  - Tiến độ bán hàng
  - Doanh thu theo dự án
  - So sánh hiệu suất giữa các dự án
- **Báo cáo Inventory**:
  - Số lượng unit còn lại
  - Phân bổ inventory theo loại
  - Tỷ lệ bán theo loại unit
  - Thời gian bán trung bình
- **Báo cáo Giá**:
  - Giá trung bình theo m²
  - Xu hướng giá theo thời gian
  - So sánh giá giữa các dự án
  - So sánh giá với thị trường

### 5. Báo cáo Khách hàng
- **Báo cáo Demographic**:
  - Phân bổ khách hàng theo độ tuổi
  - Phân bổ khách hàng theo thu nhập
  - Phân bổ khách hàng theo nghề nghiệp
  - Phân bổ khách hàng theo khu vực
- **Báo cáo Hành vi**:
  - Loại bất động sản được quan tâm
  - Khu vực được quan tâm
  - Ngân sách trung bình
  - Mục đích mua (để ở, đầu tư)
- **Báo cáo Retention**:
  - Tỷ lệ giữ chân khách hàng
  - Tỷ lệ khách hàng quay lại
  - Số lượng giao dịch trung bình trên mỗi khách hàng
  - Giá trị vòng đời khách hàng

### 6. Báo cáo Thị trường
- **Báo cáo Xu hướng**:
  - Xu hướng giá thị trường
  - Xu hướng cung-cầu
  - Xu hướng loại bất động sản
  - Xu hướng khu vực
- **Báo cáo Cạnh tranh**:
  - So sánh với đối thủ cạnh tranh
  - Thị phần
  - Phân tích SWOT
  - Phân tích giá cạnh tranh
- **Báo cáo Dự báo**:
  - Dự báo xu hướng thị trường
  - Dự báo nhu cầu
  - Dự báo giá
  - Dự báo doanh thu

### 7. Tùy chỉnh Báo cáo
- **Tạo báo cáo tùy chỉnh**:
  - Chọn các chỉ số
  - Chọn khoảng thời gian
  - Chọn kiểu biểu đồ
  - Lưu mẫu báo cáo
- **Lọc và phân đoạn**:
  - Lọc theo dự án
  - Lọc theo khu vực
  - Lọc theo thời gian
  - Phân đoạn theo nhiều tiêu chí
- **Xuất báo cáo**:
  - PDF
  - Excel
  - CSV
  - Hình ảnh
- **Lập lịch báo cáo**:
  - Gửi báo cáo định kỳ qua email
  - Tự động tạo báo cáo
  - Đặt người nhận báo cáo
  - Tùy chỉnh nội dung email

## Wireframe

### Dashboard tổng quan
```
┌─────────────────────────────────────────────────────────────────────────┐
│ Dashboard                                        [Export] [Customize]   │
├─────────────────────────────────────────────────────────────────────────┤
│ ┌─────────────────┐ ┌─────────────────┐ ┌─────────────────┐ ┌─────────┐ │
│ │                 │ │                 │ │                 │ │         │ │
│ │   Revenue       │ │  Transactions   │ │   New Leads     │ │  Conv.  │ │
│ │   $4.85M        │ │      128        │ │      256        │ │  Rate   │ │
│ │   ▲ 18% MoM     │ │   ▲ 12% MoM     │ │   ▲ 22% MoM     │ │  24.5%  │ │
│ │                 │ │                 │ │                 │ │  ▲ 3.2% │ │
│ └─────────────────┘ └─────────────────┘ └─────────────────┘ └─────────┘ │
│                                                                         │
│ ┌─────────────────────────────────────────────────────────────────────┐ │
│ │ Revenue Trends                                                     │ │
│ │                                                                     │ │
│ │                                                                     │ │
│ │                                                                     │ │
│ │     Revenue Line Chart                                              │ │
│ │     (By Month)                                                      │ │
│ │                                                                     │ │
│ │                                                                     │ │
│ │                                                                     │ │
│ └─────────────────────────────────────────────────────────────────────┘ │
│                                                                         │
│ ┌─────────────────────────────┐       ┌─────────────────────────────┐   │
│ │                             │       │                             │   │
│ │                             │       │                             │   │
│ │                             │       │                             │   │
│ │     Transactions by Project │       │     Leads by Source         │   │
│ │     (Pie Chart)             │       │     (Bar Chart)             │   │
│ │                             │       │                             │   │
│ │                             │       │                             │   │
│ │                             │       │                             │   │
│ └─────────────────────────────┘       └─────────────────────────────┘   │
│                                                                         │
│ ┌─────────────────────────────────────────────────────────────────────┐ │
│ │ Recent Activities                                                  │ │
│ │                                                                     │ │
│ │ Type       │ Details                          │ Date       │ Value │ │
│ ├───────────┼──────────────────────────────────┼────────────┼───────┤ │
│ │ Transaction│ Unit C-1805 sold to Bob Johnson  │ Today      │ $450K │ │
│ ├───────────┼──────────────────────────────────┼────────────┼───────┤ │
│ │ Lead      │ New lead from website: Tom Wilson│ Yesterday  │ -     │ │
│ ├───────────┼──────────────────────────────────┼────────────┼───────┤ │
│ │ Payment   │ Payment received for unit B-0502 │ 2 days ago │ $28K  │ │
│ └─────────────────────────────────────────────────────────────────────┘ │
└─────────────────────────────────────────────────────────────────────────┘
```

### Báo cáo Sales
```
┌─────────────────────────────────────────────────────────────────────────┐
│ Sales Report                                     [Export] [Print] [Share]│
├─────────────────────────────────────────────────────────────────────────┤
│ ┌─────────────────────────┐ ┌─────────────────────────┐                 │
│ │ Date Range:             │ │ Filter By:              │                 │
│ │ [Last 30 Days ▼]        │ │ [All Projects ▼]        │                 │
│ └─────────────────────────┘ └─────────────────────────┘                 │
│                                                                         │
│ ┌─────────────────────────────────────────────────────────────────────┐ │
│ │ Sales Performance                                                  │ │
│ │                                                                     │ │
│ │                                                                     │ │
│ │                                                                     │ │
│ │     Sales Performance Chart                                         │ │
│ │     (Bar Chart by Agent)                                            │ │
│ │                                                                     │ │
│ │                                                                     │ │
│ │                                                                     │ │
│ └─────────────────────────────────────────────────────────────────────┘ │
│                                                                         │
│ ┌─────────────────────────────────────────────────────────────────────┐ │
│ │ Sales by Agent                                                     │ │
│ │                                                                     │ │
│ │ Agent       │ Transactions │ Revenue    │ Avg Value  │ Conv. Rate  │ │
│ ├────────────┼─────────────┼────────────┼───────────┼────────────┤ │
│ │ David Agent │ 12          │ $4.2M      │ $350K     │ 28.5%      │ │
│ ├────────────┼─────────────┼────────────┼───────────┼────────────┤ │
│ │ Sarah Agent │ 10          │ $3.8M      │ $380K     │ 26.2%      │ │
│ ├────────────┼─────────────┼────────────┼───────────┼────────────┤ │
│ │ Mike Agent  │ 8           │ $2.9M      │ $362K     │ 22.8%      │ │
│ ├────────────┼─────────────┼────────────┼───────────┼────────────┤ │
│ │ Lisa Agent  │ 7           │ $2.6M      │ $371K     │ 20.5%      │ │
│ └─────────────────────────────────────────────────────────────────────┘ │
│                                                                         │
│ ┌─────────────────────────────┐       ┌─────────────────────────────┐   │
│ │                             │       │                             │   │
│ │                             │       │                             │   │
│ │                             │       │                             │   │
│ │     Sales by Project        │       │     Sales Trend             │   │
│ │     (Pie Chart)             │       │     (Line Chart)            │   │
│ │                             │       │                             │   │
│ │                             │       │                             │   │
│ │                             │       │                             │   │
│ └─────────────────────────────┘       └─────────────────────────────┘   │
└─────────────────────────────────────────────────────────────────────────┘
```

### Báo cáo Inventory
```
┌─────────────────────────────────────────────────────────────────────────┐
│ Inventory Report                                [Export] [Print] [Share]│
├─────────────────────────────────────────────────────────────────────────┤
│ ┌─────────────────────────┐ ┌─────────────────────────┐                 │
│ │ Project:                │ │ Unit Type:              │                 │
│ │ [Palm Heights ▼]        │ │ [All Types ▼]           │                 │
│ └─────────────────────────┘ └─────────────────────────┘                 │
│                                                                         │
│ ┌─────────────────────────────────────────────────────────────────────┐ │
│ │ Inventory Summary                                                  │ │
│ │                                                                     │ │
│ │ Total Units: 816                                                    │ │
│ │ Available: 324 (39.7%)                                              │ │
│ │ Reserved: 128 (15.7%)                                               │ │
│ │ Sold: 364 (44.6%)                                                   │ │
│ │                                                                     │ │
│ └─────────────────────────────────────────────────────────────────────┘ │
│                                                                         │
│ ┌─────────────────────────────┐       ┌─────────────────────────────┐   │
│ │                             │       │                             │   │
│ │                             │       │                             │   │
│ │                             │       │                             │   │
│ │     Inventory by Status     │       │     Inventory by Type       │   │
│ │     (Pie Chart)             │       │     (Bar Chart)             │   │
│ │                             │       │                             │   │
│ │                             │       │                             │   │
│ │                             │       │                             │   │
│ └─────────────────────────────┘       └─────────────────────────────┘   │
│                                                                         │
│ ┌─────────────────────────────────────────────────────────────────────┐ │
│ │ Inventory by Floor                                                 │ │
│ │                                                                     │ │
│ │                                                                     │ │
│ │                                                                     │ │
│ │     Inventory Heatmap                                               │ │
│ │     (By Floor and Unit Type)                                        │ │
│ │                                                                     │ │
│ │                                                                     │ │
│ │                                                                     │ │
│ └─────────────────────────────────────────────────────────────────────┘ │
└─────────────────────────────────────────────────────────────────────────┘
```

### Báo cáo tùy chỉnh
```
┌─────────────────────────────────────────────────────────────────────────┐
│ Custom Report Builder                            [Save] [Export] [Share]│
├─────────────────────────────────────────────────────────────────────────┤
│ ┌─────────────────────────┐ ┌─────────────────────────┐ ┌────────────┐  │
│ │ Report Name:            │ │ Date Range:             │ │ Format:    │  │
│ │ [Sales by Region      ] │ │ [Custom Range    ▼]     │ │ [PDF   ▼]  │  │
│ └─────────────────────────┘ └─────────────────────────┘ └────────────┘  │
│                                                                         │
│ ┌─────────────────────────────────────────────────────────────────────┐ │
│ │ Metrics                      │ Dimensions                           │ │
│ ├─────────────────────────────┼───────────────────────────────────────┤ │
│ │ ☑ Revenue                   │ ☑ Region                             │ │
│ │ ☑ Number of Transactions    │ ☐ Project                            │ │
│ │ ☐ Average Transaction Value │ ☐ Agent                              │ │
│ │ ☑ Conversion Rate           │ ☐ Unit Type                          │ │
│ │ ☐ Time to Close             │ ☑ Time Period                        │ │
│ └─────────────────────────────────────────────────────────────────────┘ │
│                                                                         │
│ ┌─────────────────────────────────────────────────────────────────────┐ │
│ │ Visualization                                                      │ │
│ │                                                                     │ │
│ │ ○ Bar Chart    ○ Line Chart    ● Pie Chart    ○ Table              │ │
│ │                                                                     │ │
│ └─────────────────────────────────────────────────────────────────────┘ │
│                                                                         │
│ ┌─────────────────────────────────────────────────────────────────────┐ │
│ │ Preview                                                            │ │
│ │                                                                     │ │
│ │                                                                     │ │
│ │                                                                     │ │
│ │     Report Preview                                                  │ │
│ │     (Based on selected metrics, dimensions, and visualization)      │ │
│ │                                                                     │ │
│ │                                                                     │ │
│ │                                                                     │ │
│ └─────────────────────────────────────────────────────────────────────┘ │
│                                                                         │
│ ┌─────────────────────────────────────────────────────────────────────┐ │
│ │ Schedule                                                           │ │
│ │                                                                     │ │
│ │ ☑ Schedule this report                                              │ │
│ │ Frequency: [Weekly ▼]  Day: [Monday ▼]  Time: [08:00 AM ▼]          │ │
│ │ Recipients: [admin@ionexus.com, sales@ionexus.com               ]   │ │
│ └─────────────────────────────────────────────────────────────────────┘ │
└─────────────────────────────────────────────────────────────────────────┘
```

## Responsive Design

### Desktop (>1200px)
- Hiển thị đầy đủ dashboard với layout nhiều cột
- Hiển thị tất cả các biểu đồ và báo cáo
- Các bảng dữ liệu hiển thị đầy đủ cột

### Tablet (768px - 1199px)
- Dashboard với layout 2 cột
- Các biểu đồ hiển thị theo chiều dọc
- Thu gọn bảng dữ liệu, ẩn một số cột ít quan trọng

### Mobile (<768px)
- Dashboard với layout 1 cột
- Các biểu đồ được thu nhỏ và có thể scroll ngang
- Hiển thị dạng card thay vì bảng cho dữ liệu

## Quyền truy cập
- **Super Admin**: Toàn quyền truy cập tất cả báo cáo và dashboard
- **Management**: Quyền xem tất cả báo cáo và dashboard
- **Sales Manager**: Quyền xem báo cáo sales, leads, và inventory
- **Finance**: Quyền xem báo cáo tài chính
- **Marketing**: Quyền xem báo cáo marketing và leads

## API Endpoints

### Dashboards
- `GET /api/dashboards` - Lấy danh sách dashboards
- `GET /api/dashboards/:id` - Lấy chi tiết dashboard
- `POST /api/dashboards` - Tạo dashboard mới
- `PUT /api/dashboards/:id` - Cập nhật dashboard
- `DELETE /api/dashboards/:id` - Xóa dashboard

### Reports
- `GET /api/reports` - Lấy danh sách báo cáo
- `GET /api/reports/:id` - Lấy chi tiết báo cáo
- `POST /api/reports` - Tạo báo cáo mới
- `PUT /api/reports/:id` - Cập nhật báo cáo
- `DELETE /api/reports/:id` - Xóa báo cáo
- `POST /api/reports/:id/export` - Xuất báo cáo
- `POST /api/reports/:id/schedule` - Lập lịch báo cáo

### Analytics
- `GET /api/analytics/sales` - Lấy dữ liệu phân tích sales
- `GET /api/analytics/leads` - Lấy dữ liệu phân tích leads
- `GET /api/analytics/inventory` - Lấy dữ liệu phân tích inventory
- `GET /api/analytics/finance` - Lấy dữ liệu phân tích tài chính
- `GET /api/analytics/customers` - Lấy dữ liệu phân tích khách hàng
- `GET /api/analytics/market` - Lấy dữ liệu phân tích thị trường
